(this["webpackJsonpreact-redux-saga-starter-ts"]=this["webpackJsonpreact-redux-saga-starter-ts"]||[]).push([[0],{49:function(e,t,n){e.exports=n(79)},76:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),l=n(5),s=n(10),u=n(47),i=n(17),p=n(7),d={loading:!1,loaded:!1,search:"",terms:[],urlParams:"",pager:{first:0,last:0,next:0,prev:0,self:0}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_ON":return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case"SET_LOADING_OFF":return Object(p.a)(Object(p.a)({},e),{},{loading:!1});case"SET_LOADED_TRUE":return Object(p.a)(Object(p.a)({},e),{},{loaded:!0});case"SET_LOADED_FALSE":return Object(p.a)(Object(p.a)({},e),{},{loaded:!1});case"SET_API_URL_PARAMS":return Object(p.a)(Object(p.a)({},e),{},{urlParams:t.payload});case"SET_API_PAGER_LINKS":return Object(p.a)(Object(p.a)({},e),{},{pager:t.payload});default:return e}},E={current_user:{uid:0,name:"anonymous"},csrf_token:"",logout_token:""},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SET_DATA":return Object(p.a)(Object(p.a)({},e),{},{current_user:t.payload.current_user,csrf_token:t.payload.csrf_token,logout_token:t.payload.logout_token});case"USER_LOGOUT_SUCCESS":return E;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{article:{data:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ARTICLE":return t.payload;default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ARTICLES":return t.payload;default:return e}},g=n(32),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{images:[],files:[],tags:[],title:"",body:"",selected:[],vocabulary:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_ARTICLE":return console.log("POST_ARTICLE"),t.payload;case"POST_ARTICLE_FILE":return console.log("POST_ARTICLE_FILE"),t.payload;case"SET_ARTICLE_TITLE":return Object(p.a)(Object(p.a)({},e),{},{title:t.payload});case"SET_ARTICLE_BODY":return Object(p.a)(Object(p.a)({},e),{},{body:t.payload});case"SET_SELECTED":return console.log("SET_SELECTED",t.payload),Object(p.a)(Object(p.a)({},e),{},{selected:t.payload});case"ADD_SELECTED":return Object(p.a)(Object(p.a)({},e),{},{selected:[].concat(Object(g.a)(e.selected),[t.payload])});case"SET_ARTICLE_TAGS":return Object(p.a)(Object(p.a)({},e),{},{tags:t.payload});case"ADD_ARTICLE_TAGS":return Object(p.a)(Object(p.a)({},e),{},{tags:[].concat(Object(g.a)(e.tags),[t.payload])});case"SET_VOCABULARY":var n=t.payload.data.map((function(e){return{value:e.id,label:e.name}}));return Object(p.a)(Object(p.a)({},e),{},{vocabulary:n});case"SET_ARTICLE_FILE":console.log("SET_ARTICLE_FILE");var a=t.payload,r=Object(p.a)(Object(p.a)({},e.images),{},{id:a});return Object(p.a)(Object(p.a)({},e),{},{files:r});default:return e}},y=Object(i.c)({api:f,user:m,article:b,articlePost:_,articles:O}),v=n(4),h=n.n(v),T=n(2),j=n(19),S=n(20),x=n.n(S),A="http://192.168.1.111:444",L="".concat(A,"/jsonapi"),k="".concat(A,"/session/token"),C="".concat(A,"/user/login?_format=json"),I=("".concat(A,"/user/register?_format=json"),"".concat(A,"/user/login_status?_format=json"),"".concat(A,"/user/logout?_format=json")),R="".concat(L,"/taxonomy_term/tags"),D="".concat(L,"/node/article/field_image"),w="".concat(L,"/node/article"),P="/node/article",N="?query_string=&include=field_image,field_tags,uid",U=function(e){if(""!==e.terms){console.log("endpoints.js > ARTICLES > params.terms:",e);var t="";return e.terms.split(",").map((function(e){return t+=function(e){return"&filter[taxonomy_term--tags][condition][path]=field_tags.name&filter[taxonomy_term--tags][condition][operator]=IN&filter[taxonomy_term--tags][condition][value][]=".concat(e)}(e)})),"".concat(L).concat(P).concat(N).concat("&sort[sort-created][path]=created").concat("&page[offset]=").concat(e.offset).concat("&page[limit]=").concat(e.limit).concat(t)}return console.log("endpoints.js > ARTICLES > params:",e),"".concat(L).concat(P).concat(N).concat("&page[limit]=").concat(e.limit).concat("&page[offset]=").concat(e.offset)},F=function(e){return"".concat(L,"/taxonomy_term/").concat(e)},G=function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()(k).then((function(e){return e.data})).catch((function(e){throw void 0===e.message&&(e.message="Connection Timeout"),new Error(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W={get:function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.group("api.get",decodeURI(t)),e.t0=x.a,e.t1=t,e.next=5,G();case 5:return e.t2=e.sent,e.t3={"Content-Type":"application/hal+json","X-CSRF-Token":e.t2},e.t4={headers:e.t3,withCredentials:!0,timeout:5e3},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t4).then((function(e){return console.log("response",e),console.groupEnd(),e})).catch((function(e){throw new Error("".concat(e.response.statusText," (").concat(e.response.status,")"))})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(j.a)(h.a.mark((function e(t,n){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:if("Connection Error"===(a=e.sent)){e.next=6;break}return r={url:t,method:"post",headers:{"Content-Type":"application/hal+json","X-CSRF-Token":a},withCredentials:!0,timeout:2e3,data:JSON.stringify(n)},e.abrupt("return",x()(r).then((function(e){return e})).catch((function(e){throw new Error("".concat(e.response.statusText," (").concat(e.response.status,")"))})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),post:function(){var e=Object(j.a)(h.a.mark((function e(t,n,a){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}e.t0=a,e.next=7;break;case 4:return e.next=6,G();case 6:e.t0=e.sent;case 7:return r=e.t0,c={url:t,method:"post",headers:{"Content-Type":"application/vnd.api+json","X-CSRF-Token":r},withCredentials:!0,timeout:2e3,data:JSON.stringify(n)},e.abrupt("return",x()(c).then((function(e){return console.log("response",e.data),e})).catch((function(e){throw new Error("Conection time out")})));case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),postFile:function(){var e=Object(j.a)(h.a.mark((function e(t,n,a,r){var c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}e.t0=r,e.next=7;break;case 4:return e.next=6,G();case 6:e.t0=e.sent;case 7:return c=e.t0,o={url:t,method:"post",headers:{Accept:"application/vnd.api+json","Content-Type":"application/octet-stream","X-CSRF-Token":c,"Content-Disposition":'file; filename="'+n+'"',"Accept-Encoding":"gzip, deflate, br","Accept-Language":"en-US,en;q=0.9",Connection:"keep-alive"},withCredentials:!0,timeout:2e3,data:a},e.abrupt("return",x()(o).then((function(e){return e})).catch((function(e){throw new Error("Conection time out")})));case 10:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),logout:function(){var e=Object(j.a)(h.a.mark((function e(t,n){var a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("api.logout(url, tokens): ",decodeURI(t),n),"Connection Error"===G()){e.next=7;break}return a=n.logout_token,r=n.csrf_token,c={url:t+"&token="+a+"&csrf_token="+r,method:"post",headers:{"Content-Type":"application/hal+json","X-CSRF-Token":r},withCredentials:!0,timeout:2e3},e.abrupt("return",x()(c).then((function(e){return e})).catch((function(e){throw new Error("Conection time out")})));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),patch:function(e,t){console.log("api.patch ",e,t)},delete:function(e,t){console.log("api.delete ",e,t)}},J=h.a.mark(M),B=h.a.mark(Q),V=h.a.mark(q),X=h.a.mark(z),Y=h.a.mark(H);function M(e){var t,n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(T.d)({type:"SET_LOADING_ON"});case 2:return a.next=4,Object(T.d)({type:"SET_LOADED_FALSE"});case 4:return a.prev=4,a.next=7,Object(T.b)(W.get,k);case 7:return t=a.sent,a.next=10,Object(T.b)(W.post,w,e.payload,t.data);case 10:return n=a.sent,console.group("postArticleWorker response",n),a.next=14,Object(T.d)({type:"SET_LOADED_TRUE"});case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(4),console.log("postArticleWorker error",a.t0);case 19:return a.prev=19,a.next=22,Object(T.d)({type:"SET_LOADING_OFF"});case 22:return a.finish(19);case 23:case"end":return a.stop()}}),J,null,[[4,16,19,23]])}function Q(e){var t,n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(T.d)({type:"SET_LOADING_ON"});case 2:return a.next=4,Object(T.d)({type:"SET_LOADED_FALSE"});case 4:return a.prev=4,a.next=7,Object(T.b)(W.get,k);case 7:return t=a.sent,console.group("postArticleFileWorker payload",e),a.next=11,Object(T.b)(W.postFile,D,e.file,e.data,t.data);case 11:return n=a.sent,console.group("postArticleFileWorker response",n),a.next=15,Object(T.d)({type:"SET_LOADED_TRUE"});case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(4),console.log("postArticleWorker error",a.t0);case 20:return a.prev=20,a.next=23,Object(T.d)({type:"SET_LOADING_OFF"});case 23:return a.finish(20);case 24:case"end":return a.stop()}}),B,null,[[4,17,20,24]])}function q(e){var t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(T.d)({type:"SET_LOADING_ON"});case 2:return n.next=4,Object(T.d)({type:"SET_LOADED_FALSE"});case 4:return console.log("getVocabularyWorker payload",e),n.prev=5,n.next=8,Object(T.b)(W.get,F(e.payload));case 8:return t=n.sent,console.log("getVocabularyWorker response",t),n.next=12,Object(T.d)({type:"SET_VOCABULARY",payload:t.data});case 12:return n.next=14,Object(T.d)({type:"SET_LOADED_TRUE"});case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),console.log("getVocabularyWorker error",n.t0);case 19:return n.prev=19,n.next=22,Object(T.d)({type:"SET_LOADING_OFF"});case 22:return n.finish(19);case 23:case"end":return n.stop()}}),V,null,[[5,16,19,23]])}function z(e){var t,n,a,r,c,o,l;return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return console.group("--- postTagWorker payload",e),s.next=3,Object(T.d)({type:"SET_LOADING_ON"});case 3:return s.next=5,Object(T.d)({type:"SET_LOADED_FALSE"});case 5:return s.prev=5,s.next=8,Object(T.b)(W.get,k);case 8:return t=s.sent,console.log("1/6 postTagWorker GET csrf_token",t.data),s.next=12,Object(T.b)(W.post,R,e.payload,t.data);case 12:return n=s.sent,console.log("2/6 postTagWorker POST response",n),s.next=16,Object(T.b)(W.get,F("tags"));case 16:return a=s.sent,console.log("3/6 postTagWorker SET_VOCABULARY",a),s.next=20,Object(T.e)({type:"SET_VOCABULARY",payload:a.data});case 20:return r=e.payload.data.attributes.name,console.log("4/6 postTagWorker name",r),c=a.data.data.find((function(e){return e.name===r})),o={value:c.id,label:r},console.log("5/6 postTagWorker ADD_SELECTED body",o),s.next=27,Object(T.d)({type:"ADD_SELECTED",payload:o});case 27:return l={type:"taxonomy_term--tags",id:c.id},s.next=30,Object(T.d)({type:"ADD_ARTICLE_TAGS",payload:l});case 30:return console.log("6/6 postTagWorker ADD_ARTICLE_TAGS tags",l),s.next=33,Object(T.d)({type:"SET_LOADED_TRUE"});case 33:console.groupEnd(),s.next=39;break;case 36:s.prev=36,s.t0=s.catch(5),console.log("postTagWorker error",s.t0);case 39:return s.prev=39,s.next=42,Object(T.d)({type:"SET_LOADING_OFF"});case 42:return s.finish(39);case 43:case"end":return s.stop()}}),X,null,[[5,36,39,43]])}function H(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([Object(T.h)("POST_ARTICLE",M),Object(T.h)("POST_ARTICLE_FILE",Q),Object(T.h)("POST_TAG",z),Object(T.h)("GET_VOCABULARY",q)]);case 2:case"end":return e.stop()}}),Y)}var K=h.a.mark($),Z=h.a.mark(ee);function $(e){var t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("article-sagas.js getArticleWorker payload",e),n.next=3,Object(T.d)({type:"SET_LOADING_ON"});case 3:return n.next=5,Object(T.d)({type:"SET_LOADED_FALSE"});case 5:return n.prev=5,n.next=8,Object(T.b)(W.get,(a=e,"".concat(L,"/node/article?include=field_image,field_tags,uid&filter[field_path][value]=/article/").concat(a.payload.path)));case 8:return t=n.sent,n.next=11,Object(T.d)({type:"SET_ARTICLE",payload:t.data});case 11:return n.next=13,Object(T.d)({type:"SET_LOADED_TRUE"});case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),console.log("article-sagas.js getArticleWorker error",n.t0);case 18:return n.prev=18,n.next=21,Object(T.d)({type:"SET_LOADING_OFF"});case 21:return n.finish(18);case 22:case"end":return n.stop()}var a}),K,null,[[5,15,18,22]])}function ee(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([Object(T.h)("GET_ARTICLE",$)]);case 2:case"end":return e.stop()}}),Z)}var te=h.a.mark(re),ne=h.a.mark(ce),ae=function(e){var t={first:"",prev:"",next:"",self:""};return Object.keys(e).forEach((function(n){t[n]=e[n].href;var a=new URLSearchParams(t[n]);a.has("page[offset]")&&(t[n]=a.get("page[offset]"))})),t};function re(e){var t,n,a;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(T.d)({type:"SET_LOADING_ON"});case 3:return r.next=5,Object(T.d)({type:"SET_LOADED_FALSE"});case 5:return r.prev=5,r.next=8,Object(T.b)(W.get,U(t));case 8:return n=r.sent,r.next=11,Object(T.d)({type:"SET_ARTICLES",payload:n.data});case 11:return a=ae(n.data.links),r.next=14,Object(T.d)({type:"SET_API_PAGER_LINKS",payload:a});case 14:return r.next=16,Object(T.d)({type:"SET_LOADED_TRUE"});case 16:r.next=22;break;case 18:return r.prev=18,r.t0=r.catch(5),r.next=22,Object(T.d)({type:"SET_LOADED_FALSE"});case 22:return r.prev=22,r.next=25,Object(T.d)({type:"SET_LOADING_OFF"});case 25:return r.finish(22);case 26:case"end":return r.stop()}}),te,null,[[5,18,22,26]])}function ce(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([Object(T.h)("GET_ARTICLES",re)]);case 2:case"end":return e.stop()}}),ne)}var oe=h.a.mark(ie),le=h.a.mark(pe),se=h.a.mark(de),ue=h.a.mark(fe);function ie(e){var t,n,a,r;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.name,n=e.pass,a={name:t,pass:n},c.next=4,Object(T.d)({type:"SET_LOADING_ON"});case 4:return c.prev=4,c.next=7,Object(T.b)(W.login,C,a);case 7:return r=c.sent,c.next=10,Object(T.d)({type:"USER_SET_DATA",payload:r.data});case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(4),c.next=16,Object(T.d)({type:"USER_LOGIN_FAILURE"});case 16:return c.prev=16,c.next=19,Object(T.d)({type:"SET_LOADING_OFF"});case 19:return c.finish(16);case 20:case"end":return c.stop()}}),oe,null,[[4,12,16,20]])}function pe(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(T.g)("USER_LOGIN_REQUEST");case 3:return e=t.sent,t.next=6,Object(T.c)(ie,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}}),le)}function de(){var e,t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(T.d)({type:"SET_LOADING_ON"});case 2:return n.prev=2,n.next=5,Object(T.f)();case 5:return e=n.sent,t={logout_token:e.user.logout_token,csrf_token:e.user.csrf_token},n.next=9,Object(T.b)(W.logout,I,t);case 9:return n.next=11,Object(T.d)({type:"USER_LOGOUT_SUCCESS"});case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(2),n.next=17,Object(T.d)({type:"USER_LOGOUT_FAILURE"});case 17:return n.prev=17,n.next=20,Object(T.d)({type:"SET_LOADING_OFF"});case 20:return n.finish(17);case 21:case"end":return n.stop()}}),se,null,[[2,13,17,21]])}function fe(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(T.g)("USER_LOGOUT_REQUEST");case 3:return e.next=5,Object(T.b)(de);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),ue)}var Ee=h.a.mark(me);function me(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([H(),ee(),ce(),pe(),fe()]);case 2:case"end":return e.stop()}}),Ee)}var be=Object(u.a)(),Oe=function(){try{var e=localStorage.getItem("state.store");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),ge=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,_e=Object(i.e)(y,Oe,ge(Object(i.a)(be)));be.run(me),_e.subscribe((function(){window.api=_e.getState().api}));var ye=_e,ve=n(12),he=Object(ve.a)(),Te=(n(76),n(48)),je=function(e){var t=e.component,n=Object(Te.a)(e,["component"]),a=0!==Object(l.d)((function(e){return e.user})).current_user.uid;return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/user/login"}})}}))},Se=n(9),xe=function(){return r.a.createElement("div",{id:"Logo"},r.a.createElement("h1",null,r.a.createElement(Se.a,{to:"/"},"Logo")))},Ae=function(e){var t=e.to,n=e.label;return 0!==Object(l.d)((function(e){return e.user})).current_user.uid?r.a.createElement(Se.a,{to:t},n):null},Le=function(){return r.a.createElement("div",{id:"Menu"},r.a.createElement(Se.a,{to:"/"},"Home"),r.a.createElement("div",{style:{float:"right"}},r.a.createElement(Se.a,{to:"/user/login"},"Login"),r.a.createElement(Ae,{to:"/article/create",label:"Post Article"})))},ke=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.user.current_user.uid}));return r.a.createElement("div",null,0!==t&&r.a.createElement(Se.a,{onClick:function(){return e({type:"USER_LOGOUT_REQUEST"})},to:"#"},"logout"))},Ce=function(){var e=Object(l.d)((function(e){return e.user.current_user}));return r.a.createElement("div",{style:{fontStyle:"italic"}},"Hello",0!==e.uid?r.a.createElement("div",null,r.a.createElement(Se.a,{to:"/user/profile"}," ",e.name," "),r.a.createElement(ke,null)):" Anonymous")},Ie=function(){return r.a.createElement("div",{id:"header"},r.a.createElement(xe,null),r.a.createElement(Le,null),r.a.createElement(Ce,null))},Re=n(23),De=function(){var e=Object(l.d)((function(e){return e.user}));return r.a.createElement("div",null,r.a.createElement("h2",null,"User Profile"),r.a.createElement("pre",null,r.a.createElement("code",null,r.a.createElement("div",null,"store.user: ",JSON.stringify(e,null,4),r.a.createElement("br",null),r.a.createElement("br",null)))))},we=function(){var e=Object(l.c)(),t=r.a.useState("manager"),n=Object(Re.a)(t,2),a=n[0],c=n[1],o=r.a.useState("1234"),s=Object(Re.a)(o,2),u=s[0],i=s[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"User Login"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(function(e){return{type:"USER_LOGIN_REQUEST",name:e.name,pass:e.pass}}({name:a,pass:u}))}},r.a.createElement("input",{type:"text",name:"name",placeholder:"Username",onChange:function(e){return c(e.target.value)},value:a}),r.a.createElement("input",{type:"password",name:"pass",placeholder:"Password",onChange:function(e){return i(e.target.value)},value:u}),r.a.createElement("input",{type:"submit",placeholder:"Login",value:"Submit"})),r.a.createElement(De,null))};function Pe(e){return null!=e&&"object"===typeof e}var Ne=Object(l.b)((function(e){return{urlParams:e.api.urlParams}}),null)((function(e){var t=e.to,n=e.title,a=e.urlParams;return"undefined"!==typeof a.terms&&""!==a.terms?r.a.createElement(Se.a,{to:"/?terms="+a.terms+"&offset="+t},n+" : "+t):r.a.createElement(Se.a,{to:"/?offset="+t},n+" : "+t)})),Ue=function(){var e=Object(l.d)((function(e){return e.api.urlParams})),t=Object(l.d)((function(e){return e.api.pager}));return r.a.createElement("div",null,r.a.createElement("button",{type:"button",disabled:!t.first},t.first?r.a.createElement(Ne,{to:t.first,title:"FIRST",urlParams:e}):"[FIRST]"),r.a.createElement("button",{type:"button",disabled:!t.prev},t.prev?r.a.createElement(Ne,{to:t.prev,title:"PREV",urlParams:e}):"[PREV]"),r.a.createElement("button",{type:"button",disabled:!t.next},t.next?r.a.createElement(Ne,{to:t.next,title:"NEXT",urlParams:e}):"[NEXT]"),r.a.createElement("button",{type:"button",disabled:!t.last},t.last?r.a.createElement(Ne,{to:t.last,title:"LAST",urlParams:e}):"[END]"))};var Fe=function(){var e=Object(l.d)((function(e){return e.api.loading})),t=Object(l.d)((function(e){return e.api.loaded})),n=Object(l.d)((function(e){return e.articles.data})),a=Object(l.d)((function(e){return e.api.urlParams})),c=new URLSearchParams(Object(s.g)().search),o=Object(l.c)(),u={terms:c.get("terms")||"",search:c.get("search")||"",offset:parseInt(c.get("offset"))||0,page:parseInt(c.get("page"))||1,items:parseInt(c.get("items"))||0,limit:parseInt(c.get("limit"))||2};return r.a.useEffect((function(){(function e(t,n){var a=Object.keys(t),r=Object.keys(n);if(a.length!==r.length)return!1;for(var c=0,o=a;c<o.length;c++){var l=o[c],s=t[l],u=n[l],i=Pe(s)&&Pe(u);if(i&&!e(s,u)||!i&&s!==u)return!1}return!0})(u,a)||(o({type:"SET_API_URL_PARAMS",payload:u}),o(function(e){return{type:"GET_ARTICLES",payload:e}}(u)))}),[o,u,a]),r.a.createElement("div",null,r.a.createElement("p",null,""!==u.terms&&"articles with terms: "+u.terms),!e&&t&&n?n.map((function(e,t){var n;n=e.field_tags.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(Se.a,{to:"/?terms="+e.name},e.name))}));var a="";return e.field_image.image_style_uri&&e.field_image.image_style_uri.forEach((function(e){e.thumbnail&&(a=e.thumbnail)})),r.a.createElement("div",{key:t,style:{marginBottom:"20px"}},r.a.createElement(Se.a,{to:e.path.alias},r.a.createElement("h4",{style:{marginBottom:"0px"}},e.title),r.a.createElement("img",{src:a,alt:"Girl in a jacket"})),n)})):r.a.createElement("div",null,"Loading..."),r.a.createElement(Ue,null))},Ge=function(e){var t,n=e.name;return r.a.createElement(Se.a,{to:"/?terms="+(t=n,t.substring(t.lastIndexOf("/")+1))}," ",n)},We=function(){var e=Object(l.d)((function(e){return e.api.loaded})),t=Object(l.d)((function(e){return e.api.loading})),n=Object(l.d)((function(e){return e.article})),a=Object(l.c)(),c=Object(s.h)();return r.a.useEffect((function(){console.log("path",c),a({type:"GET_ARTICLE",payload:c})}),[c,a]),r.a.createElement("div",null,!t&&e&&n.data?r.a.createElement("div",null,r.a.createElement("h1",null,n.data[0].title),r.a.createElement("div",null,n.data[0].created),r.a.createElement("div",null,r.a.createElement("img",{src:A+"/"+n.data[0].field_image.uri.url,alt:n.data[0].title})),r.a.createElement("div",null,n.data[0].body.value.substring(0,255)),r.a.createElement("div",null,n.data[0].field_tags.lenght&&n.data[0].field_tags.map((function(e,t){return r.a.createElement("span",{key:t},r.a.createElement(Ge,{name:e}))})))):r.a.createElement("div",null,"loading..."))},Je=n(44),Be=n.n(Je),Ve=n(46),Xe=(n(78),function(){var e=Object(l.d)((function(e){return e.articlePost.files})),t=Object(l.d)((function(e){return e.articlePost.title})),n=Object(l.d)((function(e){return e.articlePost.body})),a=Object(l.d)((function(e){return e.articlePost.tags})),c=Object(l.d)((function(e){return e.articlePost.vocabulary})),o=Object(l.d)((function(e){return e.articlePost.selected})),s=Object(l.d)((function(e){return e.user.csrf_token})),u=Object(l.c)(),i=r.a.useState(""),p=Object(Re.a)(i,2),d=p[0],f=p[1],E=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,t.meta,a=n,r=D,c={Accept:"application/vnd.api+json","Content-Type":"application/octet-stream","Content-Disposition":'file; filename="'+n.name+'"',"X-CSRF-Token":s},console.log("body",a),console.log("headers",c),e.abrupt("return",{url:r,headers:c,body:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.a.useEffect((function(){u({type:"GET_VOCABULARY",payload:"tags"})}),[u]);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(r){r.preventDefault();var c={data:{type:"node--article",attributes:{title:t,body:{value:n,format:"plain_text"}},relationships:{field_image:{data:{type:"file--file",id:e.id,meta:{alt:"Json Uploaded Testing1",title:"Json Uploaded Testing1",width:null,height:null}}},field_tags:{data:a}}}};u(function(e){return{type:"POST_ARTICLE",payload:e}}(c))},style:{margin:"10px"}},r.a.createElement("input",{type:"text",name:"title",placeholder:"Title",onChange:function(e){return u({type:"SET_ARTICLE_TITLE",payload:e.target.value})},value:t||"",style:{margin:"10px 0px"}}),r.a.createElement(Be.a,{multiple:!1,maxFiles:1,getUploadParams:E,onChangeStatus:function(e,t,n){var a=e.xhr;a&&(console.log("xhr",a),a.onreadystatechange=function(){if(4===a.readyState){var e=JSON.parse(a.response);console.log("xhr.response",e),e.hasOwnProperty("data")&&u({type:"SET_ARTICLE_FILE",payload:e.data.id}),e.hasOwnProperty("errors")&&(n[0].remove(),f(t))}})},accept:"image/*,audio/*,video/*",inputContent:function(e,t){return t.reject?"Image, audio and video files only":"Drag Files"},styles:{dropzoneReject:{borderColor:"red",backgroundColor:"#DAA"},inputLabel:function(e,t){return t.reject?{color:"red"}:{}}}}),d,r.a.createElement("br",null),r.a.createElement("textarea",{name:"body",placeholder:"Body",onChange:function(e){return u({type:"SET_ARTICLE_BODY",payload:e.target.value})},value:n||"",style:{margin:"10px 0px"}}),r.a.createElement(Ve.a,{placeholder:"Creatable Multi Select",isMulti:!0,value:o,isClearable:!0,options:c,onChange:function(e){if(console.log("handleSelectOnChange value",JSON.stringify(e)),u({type:"SET_SELECTED",payload:e}),e){var t=e.map((function(e){return{type:"taxonomy_term--tags",id:e.value}}));u(function(e){return{type:"SET_ARTICLE_TAGS",payload:e}}(t))}},onCreateOption:function(e){u({type:"POST_TAG",payload:{data:{type:"taxonomy_term--tags",attributes:{name:e}}}})},style:{margin:"10px 0px"}}),r.a.createElement("input",{type:"submit",placeholder:"Send",value:"Submit",style:{margin:"10px 0px"}})),r.a.createElement("div",{style:{backgroundColor:"#f4f4f4",padding:"10px"}},r.a.createElement("code",null,r.a.createElement("div",null,r.a.createElement("strong",null,"store.articlePost.title:")," ",JSON.stringify(t)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("strong",null,"store.articlePost.files:")," ",JSON.stringify(e)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("strong",null,"store.articlePost.body:")," ",JSON.stringify(n)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("strong",null,"store.articlePost.tags:")," ",JSON.stringify(a)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("strong",null,"store.articlePost.selected:")," ",JSON.stringify(o)),r.a.createElement("br",null))))}),Ye=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Ie,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/user/login",component:we}),r.a.createElement(s.b,{path:"/user/profile",component:De}),r.a.createElement(je,{path:"/article/create",component:Xe}),r.a.createElement(s.b,{path:"/article/:path",component:We}),r.a.createElement(s.b,{exact:!0,path:"/:path?",component:Fe})))};ye.subscribe((function(){!function(e){try{var t=JSON.stringify(e.store);localStorage.setItem("state.store",t)}catch(n){}}({store:ye.getState()})})),o.a.render(r.a.createElement(l.a,{store:ye},r.a.createElement(s.c,{history:he},r.a.createElement(Ye,null))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.4156dd3c.chunk.js.map